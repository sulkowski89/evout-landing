<!doctype html>
<html lang="en" class="h-full bg-black text-white antialiased">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
    <meta name="color-scheme" content="dark" />
    <meta name="description" content="EVOUT — Marketing & IT solutions for ambitious businesses." />
    <title>EVOUT — Marketing & IT</title>

    <!-- Tailwind (CDN for prototype) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      // Tailwind minimal config (B/W only)
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: [
                '-apple-system','BlinkMacSystemFont','Segoe UI','Inter','Roboto','Helvetica','Arial','sans-serif'
              ],
            },
          }
        }
      };
    </script>

    <style>
      :root { --ring: 3px; }
      :focus-visible { outline: var(--ring) solid rgba(255,255,255,0.6); outline-offset: 2px; }
      @media (prefers-reduced-motion: reduce) {
        * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
      }

      /* Preloader SVG animation */
      @keyframes rise {
        0% { transform: translateY(100vh); opacity: 0.8; }
        100% { transform: translateY(-110vh); opacity: 0.8; }
      }
      .cosmic-line {
        animation-name: rise;
        animation-timing-function: cubic-bezier(.2,.8,.2,1);
        animation-iteration-count: infinite;
        will-change: transform;
      }

      /* EVOUT pulsation */
      @keyframes pulseSoft {
        0% { transform: scale(0.985); opacity: 0.95; }
        50% { transform: scale(1.0); opacity: 1; }
        100% { transform: scale(0.985); opacity: 0.95; }
      }
      .evout-pulse { animation: pulseSoft 2.5s ease-in-out infinite; }

      /* Slide up (intro → hero) */
      @keyframes slideUpAway {
        0% { transform: translateY(0); }
        100% { transform: translateY(-120%); }
      }
      .slide-up { animation: slideUpAway var(--slide-up-ms,700ms) cubic-bezier(.2,.8,.2,1) both; }
    </style>

    <script>
      // ====== CONFIG (easy to tweak) ======
      const APP_CONFIG = {
        INTRO_MS: 5000,          // total intro duration (preloader)
        SLIDE_UP_MS: 700,        // EVOUT slide-up on click
        PULSE: true,             // EVOUT pulsation
        DEFAULT_LANG: 'en',      // en | de | pl | ru | ar
        DOTS: 10,                // number of moving lines/dot-rows
      };

      // i18n dictionary (baseline EN)
      const I18N = {
        en: {
          langName: "English",
          skipIntro: "Skip intro",
          nav: { services:"Services", pricing:"Pricing", contact:"Contact" },
          hero: {
            h1: "Business success — let’s split it into parts.",
            lead: "From marketing and digitalization to growth strategy — we blend aesthetics, technology, and results.",
            primaryCta: "Let’s talk",
            explore: "Explore"
          },
          branches: {
            root: "Business success",
            a: { title: "Marketing", a1:"Werbetechnik (offline)", a2:"Digital media" },
            b: { title: "Digitalization", b1:"Websites", b2:"SEO", b3:"AI Agent", b4:"Automations", b5:"Applications" },
            c: { title: "Strategy & Growth", c1:"Positioning", c2:"CRO & Analytics", c3:"Go-to-market" },
            more: "See details"
          },
          services: { title: "Services" },
          pricing: {
            title: "Packages",
            starter: { title:"Starter", p1:"Landing page", p2:"Basic SEO", p3:"Analytics setup", price:"from €990" },
            growth:  { title:"Growth",  p1:"Website (up to 8 pages)", p2:"SEO + content plan", p3:"Process automations", price:"from €3,900" },
            custom:  { title:"Custom",  p1:"Bespoke scope", p2:"Integrations", p3:"Ongoing support", price:"on request" },
            cta: "Choose plan"
          },
          contact: {
            title:"Contact",
            name:"Name",
            email:"Email",
            message:"Project details",
            submit:"Send",
            thanks:"Thanks! We will get back to you."
          },
          footer: { privacy:"Privacy", terms:"Terms", email:"hello@evout.com" }
        },
        de: {
          langName: "Deutsch",
          skipIntro: "Intro überspringen",
          nav: { services:"Leistungen", pricing:"Pakete", contact:"Kontakt" },
          hero: {
            h1: "Geschäftserfolg — wir zerlegen ihn in Bausteine.",
            lead: "Von Marketing und Digitalisierung bis Wachstumsstrategie — Ästhetik, Technologie und Ergebnisse.",
            primaryCta: "Lass uns sprechen",
            explore: "Entdecken"
          },
          branches: {
            root: "Geschäftserfolg",
            a: { title: "Marketing", a1:"Werbetechnik (offline)", a2:"Digitale Medien" },
            b: { title: "Digitalisierung", b1:"Websites", b2:"SEO", b3:"KI-Agent", b4:"Automatisierungen", b5:"Applikationen" },
            c: { title: "Strategie & Wachstum", c1:"Positionierung", c2:"CRO & Analytics", c3:"Go-to-Market" },
            more: "Details ansehen"
          },
          services: { title: "Leistungen" },
          pricing: {
            title: "Pakete",
            starter: { title:"Starter", p1:"Landingpage", p2:"Basis-SEO", p3:"Analytics-Setup", price:"ab €990" },
            growth:  { title:"Growth",  p1:"Website (bis 8 Seiten)", p2:"SEO + Content-Plan", p3:"Prozessautomatisierungen", price:"ab €3.900" },
            custom:  { title:"Custom",  p1:"Individuelles Paket", p2:"Integrationen", p3:"Laufende Betreuung", price:"auf Anfrage" },
            cta: "Paket wählen"
          },
          contact: {
            title:"Kontakt",
            name:"Name",
            email:"E-Mail",
            message:"Projektdetails",
            submit:"Senden",
            thanks:"Danke! Wir melden uns."
          },
          footer: { privacy:"Datenschutz", terms:"AGB", email:"hello@evout.com" }
        },
        pl: {
          langName: "Polski",
          skipIntro: "Pomiń intro",
          nav: { services:"Usługi", pricing:"Pakiety", contact:"Kontakt" },
          hero: {
            h1: "Sukces biznesu — rozłóżmy go na czynniki pierwsze.",
            lead: "Od marketingu i digitalizacji po strategię wzrostu — łączymy estetykę, technologię i wyniki.",
            primaryCta: "Porozmawiajmy",
            explore: "Zobacz"
          },
          branches: {
            root: "Sukces biznesu",
            a: { title: "Marketing", a1:"Werbetechnik (offline)", a2:"Media digitalne" },
            b: { title: "Digitalizacja", b1:"Strony WWW", b2:"SEO", b3:"Agent AI", b4:"Automatyzacje", b5:"Aplikacje" },
            c: { title: "Strategia i rozwój", c1:"Pozycjonowanie", c2:"CRO i analityka", c3:"Go-to-market" },
            more: "Zobacz szczegóły"
          },
          services: { title: "Usługi" },
          pricing: {
            title: "Pakiety",
            starter: { title:"Starter", p1:"Landing page", p2:"SEO podstawowe", p3:"Konfiguracja analityki", price:"od €990" },
            growth:  { title:"Growth",  p1:"Strona (do 8 podstron)", p2:"SEO + plan treści", p3:"Automatyzacje procesów", price:"od €3 900" },
            custom:  { title:"Custom",  p1:"Szyty na miarę", p2:"Integracje", p3:"Stała opieka", price:"na zapytanie" },
            cta: "Wybierz pakiet"
          },
          contact: {
            title:"Kontakt",
            name:"Imię i nazwisko",
            email:"E-mail",
            message:"Szczegóły projektu",
            submit:"Wyślij",
            thanks:"Dziękujemy! Odezwiemy się."
          },
          footer: { privacy:"Prywatność", terms:"Regulamin", email:"hello@evout.com" }
        },
        ru: {
          langName: "Русский",
          skipIntro: "Пропустить интро",
          nav: { services:"Услуги", pricing:"Пакеты", contact:"Контакты" },
          hero: {
            h1: "Успех бизнеса — разложим на части.",
            lead: "От маркетинга и цифровизации до стратегии роста — эстетика, технологии и результат.",
            primaryCta: "Обсудить проект",
            explore: "Подробнее"
          },
          branches: {
            root: "Успех бизнеса",
            a: { title: "Маркетинг", a1:"Werbetechnik (оффлайн)", a2:"Цифровые медиа" },
            b: { title: "Цифровизация", b1:"Сайты", b2:"SEO", b3:"AI-агент", b4:"Автоматизация", b5:"Приложения" },
            c: { title: "Стратегия и рост", c1:"Позиционирование", c2:"CRO и аналитика", c3:"Go-to-market" },
            more: "Смотреть детали"
          },
          services: { title: "Услуги" },
          pricing: {
            title: "Пакеты",
            starter: { title:"Starter", p1:"Лендинг", p2:"Базовое SEO", p3:"Настройка аналитики", price:"от €990" },
            growth:  { title:"Growth",  p1:"Сайт (до 8 страниц)", p2:"SEO + контент-план", p3:"Автоматизация процессов", price:"от €3 900" },
            custom:  { title:"Custom",  p1:"Индивидуально", p2:"Интеграции", p3:"Поддержка", price:"по запросу" },
            cta: "Выбрать пакет"
          },
          contact: {
            title:"Контакты",
            name:"Имя",
            email:"Email",
            message:"Детали проекта",
            submit:"Отправить",
            thanks:"Спасибо! Мы свяжемся с вами."
          },
          footer: { privacy:"Конфиденциальность", terms:"Условия", email:"hello@evout.com" }
        },
        ar: {
          langName: "العربية",
          skipIntro: "تخطي المقدمة",
          nav: { services:"الخدمات", pricing:"الباقات", contact:"تواصل" },
          hero: {
            h1: "نجاح الأعمال — لنفككه إلى عناصر.",
            lead: "من التسويق والتحول الرقمي إلى استراتيجية النمو — نمزج الجماليات بالتقنية والنتائج.",
            primaryCta: "لنتحدث",
            explore: "استكشف"
          },
          branches: {
            root: "نجاح الأعمال",
            a: { title: "التسويق", a1:"Werbetechnik (أوفلاين)", a2:"وسائط رقمية" },
            b: { title: "التحول الرقمي", b1:"مواقع ويب", b2:"SEO", b3:"وكيل ذكاء اصطناعي", b4:"أتمتة", b5:"تطبيقات" },
            c: { title: "الاستراتيجية والنمو", c1:"التموضع", c2:"CRO وتحليلات", c3:"الذهاب إلى السوق" },
            more: "شاهد التفاصيل"
          },
          services: { title: "الخدمات" },
          pricing: {
            title: "الباقات",
            starter: { title:"Starter", p1:"صفحة هبوط", p2:"SEO أساسي", p3:"إعداد التحليلات", price:"بدءًا من €990" },
            growth:  { title:"Growth",  p1:"موقع (حتى 8 صفحات)", p2:"SEO + خطة محتوى", p3:"أتمتة العمليات", price:"بدءًا من €3,900" },
            custom:  { title:"Custom",  p1:"حسب الطلب", p2:"تكاملات", p3:"دعم مستمر", price:"حسب الطلب" },
            cta: "اختر الباقة"
          },
          contact: {
            title:"تواصل",
            name:"الاسم",
            email:"البريد الإلكتروني",
            message:"تفاصيل المشروع",
            submit:"إرسال",
            thanks:"شكرًا لك! سنتواصل معك."
          },
          footer: { privacy:"الخصوصية", terms:"الشروط", email:"hello@evout.com" }
        }
      };
    </script>
  </head>
  <body class="h-full font-sans selection:bg-white selection:text-black">
    <!-- Skip to content -->
    <a href="#main" class="sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2 focus:z-50 bg-white text-black px-3 py-2 rounded">
      Skip to content
    </a>

    <!-- INTRO / PRELOADER -->
    <section id="intro" class="fixed inset-0 z-50 flex items-center justify-center bg-black" aria-label="Intro" aria-live="off">
      <!-- Moving lines / dots (SVG) -->
      <svg class="absolute inset-0 w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true">
        <!-- vertical white thin lines + small dots moving upward -->
        <g id="lines"></g>
      </svg>

      <!-- Huge EVOUT -->
      <div id="evoutWrap" class="relative w-full flex items-end justify-center" style="height:70vh;">
        <button id="evoutBtn"
          class="evoutBtn text-white uppercase tracking-[0.15em] font-extrabold"
          style="font-size:clamp(3rem,12vw,18rem); line-height:0.9;"
          aria-label="Enter site">
          EVOUT
        </button>
      </div>

      <!-- Skip intro -->
      <button id="skipIntro" class="absolute right-3 bottom-3 rounded-full border border-white/50 px-3 py-1.5 text-sm hover:bg-white hover:text-black focus-visible:outline-offset-2">
        Skip intro
      </button>
    </section>

    <!-- HEADER -->
    <header class="sticky top-0 z-40 border-b border-white/10 bg-black/70 backdrop-blur">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between">
        <a href="#" class="font-semibold tracking-wide" aria-label="EVOUT home">EVOUT</a>

        <nav aria-label="Primary" class="hidden md:block">
          <ul class="flex items-center gap-6 text-sm">
            <li><a class="hover:underline" data-i18n="nav.services" href="#services">Services</a></li>
            <li><a class="hover:underline" data-i18n="nav.pricing" href="#pricing">Pricing</a></li>
            <li><a class="hover:underline" data-i18n="nav.contact" href="#contact">Contact</a></li>
          </ul>
        </nav>

        <!-- Language switcher -->
        <div class="flex items-center gap-2">
          <label for="lang" class="sr-only">Language</label>
          <select id="lang" class="bg-black border border-white/30 rounded-lg px-2 py-1 text-sm">
            <option value="en">EN</option>
            <option value="de">DE</option>
            <option value="pl">PL</option>
            <option value="ru">RU</option>
            <option value="ar">AR</option>
          </select>
        </div>
      </div>
    </header>

    <!-- MAIN -->
    <main id="main">
      <!-- HERO (Prism / Branches) -->
      <section id="hero" class="relative overflow-hidden">
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16 sm:py-24">
          <header class="max-w-3xl">
            <h1 class="text-4xl sm:text-5xl font-extrabold tracking-tight" data-i18n="hero.h1">
              Business success — let’s split it into parts.
            </h1>
            <p class="mt-4 text-lg text-white/80" data-i18n="hero.lead">
              From marketing and digitalization to growth strategy — we blend aesthetics, technology, and results.
            </p>
            <div class="mt-8 flex flex-wrap items-center gap-3">
              <a href="#contact" class="rounded-xl border border-white px-5 py-3 text-base font-semibold hover:bg-white hover:text-black" data-i18n="hero.primaryCta">Let’s talk</a>
              <a href="#services" class="rounded-xl border border-white/30 px-5 py-3 text-base font-semibold hover:border-white" data-i18n="hero.explore">Explore</a>
            </div>
          </header>

          <!-- Branches grid -->
          <div class="mt-12 grid gap-6 md:grid-cols-3">
            <!-- Branch A -->
            <article class="rounded-2xl border border-white/15 p-6">
              <button class="branch-btn w-full text-left flex items-center justify-between gap-4" aria-expanded="false" aria-controls="branchA">
                <span class="text-xl font-semibold" data-i18n="branches.a.title">Marketing</span>
                <span aria-hidden="true">+</span>
              </button>
              <div id="branchA" class="branch-panel max-h-0 overflow-hidden transition-[max-height] duration-500 ease-out">
                <ul class="mt-4 space-y-2 text-white/80">
                  <li>• <span data-i18n="branches.a.a1">Werbetechnik (offline)</span> — signage, events, physical presence</li>
                  <li>• <span data-i18n="branches.a.a2">Digital media</span> — social, email, reviews, promo video, photo</li>
                </ul>
                <a href="#services" class="mt-4 inline-block text-sm underline opacity-80 hover:opacity-100" data-i18n="branches.more">See details</a>
              </div>
            </article>

            <!-- Branch B -->
            <article class="rounded-2xl border border-white/15 p-6">
              <button class="branch-btn w-full text-left flex items-center justify-between gap-4" aria-expanded="false" aria-controls="branchB">
                <span class="text-xl font-semibold" data-i18n="branches.b.title">Digitalization</span>
                <span aria-hidden="true">+</span>
              </button>
              <div id="branchB" class="branch-panel max-h-0 overflow-hidden transition-[max-height] duration-500 ease-out">
                <ul class="mt-4 space-y-2 text-white/80">
                  <li>• <span data-i18n="branches.b.b1">Websites</span> — fast, accessible, Next.js</li>
                  <li>• <span data-i18n="branches.b.b2">SEO</span> — technical & content</li>
                  <li>• <span data-i18n="branches.b.b3">AI Agent</span> — chat/assistant, receptionist</li>
                  <li>• <span data-i18n="branches.b.b4">Automations</span> — ops & CRM</li>
                  <li>• <span data-i18n="branches.b.b5">Applications</span> — internal or customer-facing</li>
                </ul>
                <a href="#services" class="mt-4 inline-block text-sm underline opacity-80 hover:opacity-100" data-i18n="branches.more">See details</a>
              </div>
            </article>

            <!-- Branch C -->
            <article class="rounded-2xl border border-white/15 p-6">
              <button class="branch-btn w-full text-left flex items-center justify-between gap-4" aria-expanded="false" aria-controls="branchC">
                <span class="text-xl font-semibold" data-i18n="branches.c.title">Strategy & Growth</span>
                <span aria-hidden="true">+</span>
              </button>
              <div id="branchC" class="branch-panel max-h-0 overflow-hidden transition-[max-height] duration-500 ease-out">
                <ul class="mt-4 space-y-2 text-white/80">
                  <li>• <span data-i18n="branches.c.c1">Positioning</span> — ICP, messaging, offer</li>
                  <li>• <span data-i18n="branches.c.c2">CRO & Analytics</span> — A/B, funnels, GA4</li>
                  <li>• <span data-i18n="branches.c.c3">Go-to-market</span> — roadmap & experiments</li>
                </ul>
                <a href="#services" class="mt-4 inline-block text-sm underline opacity-80 hover:opacity-100" data-i18n="branches.more">See details</a>
              </div>
            </article>
          </div>
        </div>
      </section>

      <!-- SERVICES (placeholder for later detail) -->
      <section id="services" class="border-t border-white/10">
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16">
          <h2 class="text-2xl font-bold" data-i18n="services.title">Services</h2>
          <p class="mt-4 text-white/70">Detailed service breakdown will go here.</p>
        </div>
      </section>

      <!-- PRICING -->
      <section id="pricing" class="border-t border-white/10">
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16">
          <h2 class="text-2xl font-bold" data-i18n="pricing.title">Packages</h2>
          <div class="mt-8 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
            <article class="rounded-2xl border border-white/15 p-6">
              <header class="flex items-baseline justify-between">
                <h3 class="text-lg font-semibold" data-i18n="pricing.starter.title">Starter</h3>
                <p class="text-2xl font-bold" data-i18n="pricing.starter.price">from €990</p>
              </header>
              <ul class="mt-4 list-disc pl-5 text-white/80">
                <li data-i18n="pricing.starter.p1">Landing page</li>
                <li data-i18n="pricing.starter.p2">Basic SEO</li>
                <li data-i18n="pricing.starter.p3">Analytics setup</li>
              </ul>
              <a href="#contact" class="mt-6 inline-flex w-full justify-center rounded-xl border border-white px-4 py-2 font-medium hover:bg-white hover:text-black" data-i18n="pricing.cta">Choose plan</a>
            </article>

            <article class="rounded-2xl border border-white/15 p-6">
              <header class="flex items-baseline justify-between">
                <h3 class="text-lg font-semibold" data-i18n="pricing.growth.title">Growth</h3>
                <p class="text-2xl font-bold" data-i18n="pricing.growth.price">from €3,900</p>
              </header>
              <ul class="mt-4 list-disc pl-5 text-white/80">
                <li data-i18n="pricing.growth.p1">Website (up to 8 pages)</li>
                <li data-i18n="pricing.growth.p2">SEO + content plan</li>
                <li data-i18n="pricing.growth.p3">Process automations</li>
              </ul>
              <a href="#contact" class="mt-6 inline-flex w-full justify-center rounded-xl border border-white px-4 py-2 font-medium hover:bg-white hover:text-black" data-i18n="pricing.cta">Choose plan</a>
            </article>

            <article class="rounded-2xl border border-white/15 p-6">
              <header class="flex items-baseline justify-between">
                <h3 class="text-lg font-semibold" data-i18n="pricing.custom.title">Custom</h3>
                <p class="text-2xl font-bold" data-i18n="pricing.custom.price">on request</p>
              </header>
              <ul class="mt-4 list-disc pl-5 text-white/80">
                <li data-i18n="pricing.custom.p1">Bespoke scope</li>
                <li data-i18n="pricing.custom.p2">Integrations</li>
                <li data-i18n="pricing.custom.p3">Ongoing support</li>
              </ul>
              <a href="#contact" class="mt-6 inline-flex w-full justify-center rounded-xl border border-white px-4 py-2 font-medium hover:bg-white hover:text-black" data-i18n="pricing.cta">Choose plan</a>
            </article>
          </div>
        </div>
      </section>

      <!-- CONTACT -->
      <section id="contact" class="border-t border-white/10">
        <div class="mx-auto max-w-3xl px-4 sm:px-6 lg:px-8 py-16">
          <h2 class="text-2xl font-bold" data-i18n="contact.title">Contact</h2>
          <form class="mt-6 grid gap-4" novalidate>
            <label class="grid gap-1">
              <span class="text-sm font-medium" data-i18n="contact.name">Name</span>
              <input name="name" required autocomplete="name" class="rounded-xl border border-white/20 bg-black px-3 py-2" />
            </label>
            <label class="grid gap-1">
              <span class="text-sm font-medium" data-i18n="contact.email">Email</span>
              <input type="email" name="email" required autocomplete="email" class="rounded-xl border border-white/20 bg-black px-3 py-2" />
            </label>
            <label class="grid gap-1">
              <span class="text-sm font-medium" data-i18n="contact.message">Project details</span>
              <textarea name="message" rows="4" required class="rounded-xl border border-white/20 bg-black px-3 py-2"></textarea>
            </label>
            <button type="submit" class="mt-2 inline-flex justify-center rounded-xl border border-white px-4 py-2 font-medium hover:bg-white hover:text-black" data-i18n="contact.submit">Send</button>
            <p class="text-xs text-white/60" aria-live="polite" id="formStatus" hidden></p>
          </form>
        </div>
      </section>
    </main>

    <!-- FOOTER -->
    <footer class="border-t border-white/10 py-10">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
        <p class="text-sm">&copy; <span id="year"></span> EVOUT</p>
        <nav aria-label="Footer">
          <ul class="flex flex-wrap gap-4 text-sm">
            <li><a class="hover:underline" href="/privacy" data-i18n="footer.privacy">Privacy</a></li>
            <li><a class="hover:underline" href="/terms" data-i18n="footer.terms">Terms</a></li>
            <li><a class="hover:underline" href="mailto:hello@evout.com" data-i18n="footer.email">hello@evout.com</a></li>
          </ul>
        </nav>
      </div>
    </footer>

    <!-- JS: intro, branches, i18n -->
    <script>
      (function () {
        const $ = (s, r = document) => r.querySelector(s);
        const $$ = (s, r = document) => Array.from(r.querySelectorAll(s));
        const prefersReduced = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;

        // Year
        const year = $('#year'); if (year) year.textContent = new Date().getFullYear();

        // ===== i18n =====
        const langSelect = $('#lang');
        const setDir = (code) => {
          const rtl = code === 'ar';
          document.documentElement.dir = rtl ? 'rtl' : 'ltr';
          // swap alignment subtly for RTL
          document.documentElement.lang = code;
        };
        function applyI18n(code) {
          const dict = I18N[code] || I18N[APP_CONFIG.DEFAULT_LANG];
          // Text nodes
          $$("[data-i18n]").forEach(el => {
            const path = el.getAttribute("data-i18n").split('.');
            let cur = dict;
            for (const p of path) cur = cur?.[p];
            if (typeof cur === 'string') el.textContent = cur;
          });
          // Skip intro label
          const skip = $('#skipIntro'); if (skip) skip.textContent = dict.skipIntro || 'Skip intro';
          setDir(code);
        }
        function persistLang(code) { try { localStorage.setItem('lang', code); } catch {} }
        function readLang() { try { return new URL(location.href).searchParams.get('lang') || localStorage.getItem('lang') || APP_CONFIG.DEFAULT_LANG; } catch { return APP_CONFIG.DEFAULT_LANG; } }
        const initialLang = readLang();
        langSelect.value = initialLang;
        applyI18n(initialLang);
        langSelect.addEventListener('change', () => {
          const code = langSelect.value;
          persistLang(code);
          applyI18n(code);
        });

        // ===== Preloader SVG generation =====
        const linesG = $('#lines');
        const DOTS = Math.max(3, APP_CONFIG.DOTS|0);
        const intro = $('#intro');
        const evoutBtn = $('#evoutBtn');
        const evoutWrap = $('#evoutWrap');
        const skipBtn = $('#skipIntro');
        const HERO = $('#hero');

        if (linesG) {
          for (let i = 0; i < DOTS; i++) {
            const x = 5 + i * (90 / (DOTS - 1)); // spread across width (5..95)
            const speed = 3000 + (i % 5) * 500;  // staggered speeds
            const group = document.createElementNS('http://www.w3.org/2000/svg','g');
            group.setAttribute('class', 'cosmic-line');
            group.style.animationDuration = prefersReduced ? '300ms' : `${speed}ms`;
            group.style.animationDelay = `${(i%3)*150}ms`;

            // thin line
            const line = document.createElementNS('http://www.w3.org/2000/svg','line');
            line.setAttribute('x1', x); line.setAttribute('x2', x);
            line.setAttribute('y1', '0'); line.setAttribute('y2', '100');
            line.setAttribute('stroke', 'white'); line.setAttribute('stroke-width', '0.2');
            line.setAttribute('stroke-opacity', '0.25');

            // small dot
            const dot = document.createElementNS('http://www.w3.org/2000/svg','circle');
            dot.setAttribute('cx', x);
            dot.setAttribute('cy', '50');
            dot.setAttribute('r', '0.8');
            dot.setAttribute('fill', 'white');

            group.appendChild(line);
            group.appendChild(dot);
            linesG.appendChild(group);
          }
        }

        // EVOUT pulse toggle by config + reduce motion
        if (evoutBtn) {
          if (!prefersReduced && APP_CONFIG.PULSE) evoutBtn.classList.add('evout-pulse');
          evoutBtn.addEventListener('click', goToHero);
          evoutBtn.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); goToHero(); }
          });
        }

        // Skip intro
        if (skipBtn) {
          skipBtn.addEventListener('click', endIntroNow);
          document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') endIntroNow();
          });
        }

        // Auto end after INTRO_MS
        let introTimer = setTimeout(endIntroNow, prefersReduced ? 300 : APP_CONFIG.INTRO_MS);

        function endIntroNow() {
          clearTimeout(introTimer);
          if (!intro) return;
          intro.classList.add('hidden');
          // ensure hero is visible for non-click path
          HERO?.scrollIntoView({ behavior: prefersReduced ? 'auto' : 'smooth', block: 'start' });
        }

        function goToHero() {
          if (!evoutWrap) return endIntroNow();
          evoutWrap.style.setProperty('--slide-up-ms', `${APP_CONFIG.SLIDE_UP_MS}ms`);
          evoutWrap.classList.add('slide-up');
          setTimeout(endIntroNow, prefersReduced ? 0 : APP_CONFIG.SLIDE_UP_MS);
        }

        // ===== Branches (expand/collapse) =====
        $$('.branch-btn').forEach(btn => {
          const panel = $('#' + btn.getAttribute('aria-controls'));
          btn.addEventListener('click', () => togglePanel(btn, panel));
          btn.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); togglePanel(btn, panel); }
          });
        });

        function togglePanel(btn, panel) {
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', String(!expanded));
          if (!panel) return;
          if (expanded) {
            panel.style.maxHeight = '0px';
          } else {
            panel.style.maxHeight = panel.scrollHeight + 'px';
          }
        }
      })();
    </script>

    <noscript>
      <div class="mx-auto max-w-7xl p-4 text-sm bg-white text-black">
        JavaScript is disabled. Intro and interactions are skipped. Content is still accessible.
      </div>
    </noscript>
  </body>
</html>
